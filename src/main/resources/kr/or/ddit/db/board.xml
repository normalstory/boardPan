<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">

	<!-- 왼쪽 NAV : 게시판목록 -->
	<select id="panListManu" resultType="boardPanVo">
		select * from boardPan where PanDel='y' order by panName
	</select>

	<!-- 게시판 관리page : 게시판목록 -->
	<select id="selectUser" resultType="boardPanVo">
		select * from boardPan order by PanDel desc, panName asc
	</select>

	<!-- 게시판 관리page : 게시판추가 -->
	<insert id="insertPan" parameterType="boardPanVo">
		insert into boardPan
		values ('testA'||PanId.nextval, #{panName}, #{panDel}, #{panWriter}, SYSDATE)
	</insert>

	<!-- 게시판 관리page : 게시판 아이디로 게시판 확인 -->
	<select id="chackPan" resultType="boardPanVo" parameterType="String">
		select * from boardPan where PanId=#{panId}
	</select>
		
	<!-- 게시판 관리page : 게시판수정 -->
	<update id="updatePan" parameterType="boardPanVo">
		update boardPan set
		PanName=#{panName}, PanDel=#{panDel}
		where
		PanId=#{panId}
	</update>
	
	<!-- 게시판 목록page : '선택한' 게시판에 대한 게시글 목록 받기 -->
	<select id="textVoList" resultType="BoardTextVo" parameterType="String">
		select * from boardText where PanId=#{panId} order by textNum desc
	</select>
	
	<!-- 게시판 목록page : '선택한' 게시판에 대한 게시글 목록 받기 + " 페이지 별 목록의 개수 제한 " -->
	<select id="textVoListPage" resultType="BoardTextVo" parameterType="pageVo">
		select * from
				(select rownum rnum, a.* from
					(select boardText.* from boardText 
                 	 where PanId=#{panId} order by textNum desc) a)
		where rnum between #{page}*#{pageSize}-(#{pageSize}-1)
		               and #{page}*#{pageSize}
	</select>
	
	<!-- 게시판 목록page : '선택한' 게시판에 대한 게시글 목록의 '개수' for 페이지 처리   -->
	<select id="pageCnt" resultType="integer" parameterType="String">
		select count(*) from boardText where PanId=#{panId} 
	</select>
</mapper>



	